"use strict";(self.webpackChunkvrcft_docs=self.webpackChunkvrcft_docs||[]).push([[1779],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>k});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),d=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=d(e.components);return a.createElement(c.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=d(n),m=r,k=u["".concat(c,".").concat(m)]||u[m]||p[m]||i;return n?a.createElement(k,o(o({ref:t},s),{},{components:n})):a.createElement(k,o({ref:t},s))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[u]="string"==typeof e?e:r,o[1]=l;for(var d=2;d<i;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},65130:(e,t,n)=>{n.d(t,{b:()=>o,k:()=>l});var a=n(67294),r=n(902);const i=a.createContext(null);function o(e){let{children:t,content:n}=e;const r=function(e){return(0,a.useMemo)((()=>({metadata:e.metadata,frontMatter:e.frontMatter,assets:e.assets,contentTitle:e.contentTitle,toc:e.toc})),[e])}(n);return a.createElement(i.Provider,{value:r},t)}function l(){const e=(0,a.useContext)(i);if(null===e)throw new r.i6("DocProvider");return e}},90351:(e,t,n)=>{n.d(t,{F4:()=>o,d9:()=>d,gm:()=>c,xb:()=>l,y$:()=>s});var a=n(65130),r=n(67294),i=n(52263);function o(e){let{children:t}=e;const{metadata:n}=(0,a.k)(),{editUrl:i}=n;return r.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},t)}function l(e){let{children:t,to:n,append:a=""}=e;const{siteConfig:o}=(0,i.Z)(),l=o.customFields[n.toLowerCase()];return r.createElement("a",{href:l.href+a,target:"_blank",rel:"noopener noreferrer"},t??l.label)}function c(e){let{children:t,cause:n}=e;return r.createElement("div",null,r.createElement("table",null,r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,"Cause")),r.createElement("td",{style:{textAlign:"left",width:"100vh"}},n)),r.createElement("tr",null,r.createElement("td",null,r.createElement("strong",null,"Solution")),r.createElement("td",{style:{textAlign:"left",width:"100vh"}},t)))))}const d=e=>{let{children:t,color:n}=e;return r.createElement("span",{style:{color:n}},t)},s=e=>{let{children:t,color:n}=e;return r.createElement("span",{style:{backgroundColor:n,borderRadius:"2px",color:"#fff",padding:"0.2rem"}},t)}},41054:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>c,toc:()=>s});var a=n(87462),r=(n(67294),n(3905)),i=n(90351);const o={description:"Detailed overview of creating VRCFaceTracking Tracking Modules."},l="Tracking Module SDK",c={unversionedId:"vrcft-software/vrcft-sdk/tracking-module",id:"vrcft-software/vrcft-sdk/tracking-module",title:"Tracking Module SDK",description:"Detailed overview of creating VRCFaceTracking Tracking Modules.",source:"@site/docs/vrcft-software/vrcft-sdk/tracking-module.mdx",sourceDirName:"vrcft-software/vrcft-sdk",slug:"/vrcft-software/vrcft-sdk/tracking-module",permalink:"/docs/vrcft-software/vrcft-sdk/tracking-module",draft:!1,editUrl:"https://github.com/VRCFaceTracking/docs/edit/master/docs/vrcft-software/vrcft-sdk/tracking-module.mdx",tags:[],version:"current",frontMatter:{description:"Detailed overview of creating VRCFaceTracking Tracking Modules."},sidebar:"tutorialSidebar",previous:{title:"SDK",permalink:"/docs/category/sdk"},next:{title:"Hardware Guides",permalink:"/docs/category/hardware-guides"}},d={},s=[{value:"Summary",id:"summary",level:3},{value:"Tracking Module Overview",id:"ue-overview",level:3},{value:"Project Setup",id:"project-setup",level:2},{value:"Tracking Module Architecture",id:"tracking-module-architecture",level:2},{value:"Building Project",id:"building-project",level:2}],u={toc:s},p="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"tracking-module-sdk"},"Tracking Module SDK"),(0,r.kt)("hr",null),(0,r.kt)("admonition",{title:"Still under construction!",type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"This reference document is still actively being worked on.\nChanges are subject to happen discretionally."),(0,r.kt)("p",{parentName:"admonition"},"Please consider contributing by ",(0,r.kt)(i.F4,{mdxType:"EditUrl"},"editing this page!"))),(0,r.kt)("h3",{id:"summary"},"Summary"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"VRCFaceTracking")," provides an external tracking module\nSDK that allows developers to send face tracking data to\nany ",(0,r.kt)("strong",{parentName:"p"},"VRCFaceTracking")," compatible app. Modules will send\ndata to the generalized ",(0,r.kt)("strong",{parentName:"p"},"UnifiedTracking")," interface that\nVRCFaceTracking will use to send tracking data to applications."),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"ue-overview"},"Tracking Module Overview"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#project-setup"},"Project Setup")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#tracking-module-architecture"},"Tracking Module Architecture")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#building-project"},"Building Project"))),(0,r.kt)("h2",{id:"project-setup"},"Project Setup"),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"VRCFaceTracking")," uses ",(0,r.kt)("strong",{parentName:"p"},".NET 7"),", a relatively\neasy and intuitive development platform. ",(0,r.kt)("strong",{parentName:"p"},"VRCFaceTracking")," has\nthe ability to load any class library (Managed ",(0,r.kt)("inlineCode",{parentName:"p"},".dll")," files) built\non the ",(0,r.kt)("strong",{parentName:"p"},".NET")," platform using a built-in module loader."),(0,r.kt)("p",null,"To get started, create a new Class Library project using the\n",(0,r.kt)("strong",{parentName:"p"},".NET 7")," SDK and framework. Many IDEs provide a template to\nquickly get started with this environment."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Name the project after the tracking interface being implemented to\nVRCFaceTracking; a general naming scheme for tracking modules is along\nthe lines of ",(0,r.kt)("inlineCode",{parentName:"p"},"ExampleExtTrackingInterface"),".")),(0,r.kt)("p",null,"Once the project environment is setup, include ",(0,r.kt)("inlineCode",{parentName:"p"},"VRCFaceTracking.Core"),"\nas a dependency (this can either be a project reference by using the\nVRCFaceTracking.Core project in your own project, or by referencing the\n",(0,r.kt)("inlineCode",{parentName:"p"},"VRCFaceTracking.Core")," binary), and inherit ",(0,r.kt)("inlineCode",{parentName:"p"},"ExtTrackingModule")," to your\nmodule's main class. This will be where all the main functionality\nof the module will be implemented."),(0,r.kt)("admonition",{title:"Must implement ExtTrackingModule",type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"VRCFaceTracking will at this time only load your external module\nif the base class inherits ExtTrackingModule, otherwise it will be\nskipped. This is to ensure that developers are implementing a\ntracking interface extension for devices to use VRCFaceTracking tracking\ndata, or otherwise."),(0,r.kt)("p",{parentName:"admonition"},"This may be changed in the future to allow different types of modules\nto be loaded by the module loader (potentially those that can provide\nan output for VRCFaceTracking tracking data, modify parts of VRCFaceTracking,\nmodify the UI of VRCFaceTracking, and more).")),(0,r.kt)("p",null,"The default architecture platform should be ",(0,r.kt)("inlineCode",{parentName:"p"},"Any CPU")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"x64")," to build\nfor VRCFaceTracking."),(0,r.kt)("p",null,"Your project environment should be fully setup and ready to accept your\ntracking interface!"),(0,r.kt)("h2",{id:"tracking-module-architecture"},"Tracking Module Architecture"),(0,r.kt)("hr",null),(0,r.kt)("admonition",{title:"Refer to the VRCFaceTracking API!",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The following API's are referenced when\nwriting a module. These are included with ",(0,r.kt)("inlineCode",{parentName:"p"},"VRCFaceTracking.Core"),". "),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/benaclejames/VRCFaceTracking/blob/VRCFaceTracking.Core/SDK/ExtTrackingModule.cs"},(0,r.kt)("inlineCode",{parentName:"a"},"ExtTrackingModule"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/benaclejames/VRCFaceTracking/blob/VRCFaceTracking.Core/SDK/ModuleMetadata.cs"},(0,r.kt)("inlineCode",{parentName:"a"},"ModuleMetadata")," (within ",(0,r.kt)("inlineCode",{parentName:"a"},"ExtTrackingModule"),")")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/benaclejames/VRCFaceTracking/blob/VRCFaceTracking.Core/UnifiedTracking.cs"},(0,r.kt)("inlineCode",{parentName:"a"},"UnifiedTracking"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/benaclejames/VRCFaceTracking/blob/VRCFaceTracking.Core/Params/Expressions/UnifiedExpressions.cs"},(0,r.kt)("inlineCode",{parentName:"a"},"UnifiedExpressions")))),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/benaclejames/VRCFaceTracking"},(0,r.kt)("strong",{parentName:"a"},"All of VRCFaceTracking is open source"))," and is already well documented\nwith IDE contextual documentation.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c",metastring:'title="ExampleExtTrackingInterface.cs"',title:'"ExampleExtTrackingInterface.cs"'},'public class ExampleExtTrackingModule : ExtTrackingModule\n{\n    // What your interface is able to send as tracking data.\n    public override (bool SupportsEye, bool SupportsExpression) Supported => (true, true);\n\n    // This is the first function ran by VRCFaceTracking. Make sure to completely initialize \n    // your tracking interface or the data to be accepted by VRCFaceTracking here. This will let \n    // VRCFaceTracking know what data is available to be sent from your tracking interface at initialization.\n    public override (bool eyeSuccess, bool expressionSuccess) Initialize(bool eyeAvailable, bool expressionAvailable)\n    {\n        var state = (eyeAvailable, expressionAvailable);\n\n        ModuleInformation.Name = "Example Module";\n\n        // Example of an embedded image stream being referenced as a stream\n        var stream = \n            GetType()\n            .Assembly\n            .GetManifestResourceStream("ExampleExtTrackingInterface.Assets.x-logo.png");\n\n        // Setting the stream to be referenced by VRCFaceTracking.\n        ModuleInformation.StaticImages = \n            stream != null ? new List<Stream> { stream } : ModuleInformation.StaticImages;\n\n        //... Initializing module. Modify state tuple as needed (or use bool contexts to determine what should be initialized).\n\n        return state;\n    }\n\n    // Polls data from the tracking interface.\n    // VRCFaceTracking will run this function in a separate thread;\n    public override void Update()\n    {\n        // Get latest tracking data from interface and transform to VRCFaceTracking data.\n\n        if (Status == ModuleState.Active) // Module Status validation\n        {\n            // ... Execute update cycle.\n            UnifiedTracking.Data.Eye.Left.Openness = ExampleTracker.LeftEye.Openness;\n            UnifiedTracking.Data.Shapes[(int)UnifiedExpressions.JawOpen] = ExampleTracker.Mouth.JawOpen;\n        }\n\n        // Add a delay or halt for the next update cycle for performance. eg: \n        Thread.Sleep(10);\n    }\n\n    // Called when the module is unloaded or VRCFaceTracking itself tears down.\n    public override void Teardown()\n    {\n        //... Deinitialize tracking interface; dispose any data created with the module.\n    }\n}\n')),(0,r.kt)("h2",{id:"building-project"},"Building Project"),(0,r.kt)("p",null,"Once the tracking module is fully setup and ready to be deployed, compile your binary.\nThis binary can then be loaded by VRCFaceTracking's module system!"),(0,r.kt)("p",null,"Simply take the compiled binary and place it in ",(0,r.kt)("inlineCode",{parentName:"p"},"%appdata%\\VRCFaceTracking\\CustomLibs"),",\nVRCFaceTracking will load any external modules in alphabetical order that are included in\nthis folder."),(0,r.kt)("admonition",{title:"Use Build Events!",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Setting up build events for your project can make it easy to\niterate your project faster. Create a build event to place your\ncompiled binaries into the appropriate destinations!")))}m.isMDXComponent=!0}}]);